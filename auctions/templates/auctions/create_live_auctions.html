

{% block content %}
    <h1>Create Live Auctions</h1>
    {% for message in messages %}
        <div>{{ message }}</div>
    {% endfor %}
    <a href="{% url 'twitch_authenticate' %}">Authenticate with Twitch</a>
    
    <form method="post" action="{% url 'create_live_auctions' %}">
        {% csrf_token %}
        {{ form.as_p }}

        <!-- Twitch stream embedding -->
        <label for="twitch_username">Twitch Username:</label>
        <input type="text" name="twitch_username" id="twitch_username" required>
        <!-- New image input fields -->
        <label for="{{ form.image_url.id_for_label }}">Image URL:</label>
        {{ form.image_url }}
        
        <label for="{{ form.image_upload.id_for_label }}">Upload Image:</label>
        {{ form.image_upload }}

        <button type="submit">Create Auction</button>
    </form>

    <!-- Embed your Twitch stream here using the Twitch Embed API -->
<div id="twitch-embed"></div>
<script src="https://player.twitch.tv/js/embed/v1.js"></script>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        // Replace YOUR_TWITCH_CLIENT_ID with your actual Twitch client ID
        var twitchClientId = "TWITCH_CLIENT_ID";
        var twitchUsernameInput = document.getElementById("twitch_username");

        twitchUsernameInput.addEventListener("change", function () {
            var twitchUsername = twitchUsernameInput.value;

            var player = new Twitch.Player("twitch-embed", {
                width: "50%",
                height: 480,
                channel: twitchUsername,
                // You can customize additional options here
            });
            player.setVolume(0.5);
        });
    });
</script>
{% endblock %}
